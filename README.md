# Инвертированный индекс с сжатием

**Версия:** 0.1.0

## Описание проекта

Данный проект представляет собой реализацию системы полнотекстового поиска на основе инвертированного индекса с возможностью сжатия постинг-листов. Проект разработан в рамках курса по информационному поиску и демонстрирует практическое применение различных методов обработки текста и алгоритмов сжатия данных.

### Основные возможности

1. **Сбор данных:**
   - Автоматический сбор публикаций из Telegram-каналов университетов (МГУ и СПбГУ)
   - Сохранение данных в SQLite базу данных
   - Сбор метаданных (просмотры, репосты)

2. **Полнотекстовый поиск:**
   - Быстрый поиск по коллекции документов
   - Поддержка различных методов предобработки текста
   - Эффективное хранение и доступ к индексу

3. **Методы предобработки текста:**
   - Приведение к нижнему регистру (`lowcase`)
   - Нормализация пробелов (`normalize_spaces`)
   - Удаление специальных символов (`special_chars`)
   - Удаление стоп-слов (`remove_stopwords`)
   - Лемматизация (`lemmatize_text`)

4. **Алгоритмы сжатия:**
   - Elias Gamma coding
   - Elias Delta coding
   - Возможность работы без сжатия для сравнения эффективности

5. **Интерфейсы доступа:**
   - Консольное приложение (CLI)
   - HTTP API для веб-доступа

### Технические детали

- **База данных:** SQLite для хранения исходных документов
- **Обработка текста:** NLTK и PyMorphy2 для русского языка
- **Сжатие данных:** Реализация алгоритмов Elias кодирования
- **Производительность:** Оптимизирована для работы с коллекцией ~40,000 документов

## Установка

```bash
git clone <repo_url>
cd inverted_index-main
python -m venv venv && source venv/bin/activate
pip install -r requirements.txt
```

## Сбор данных

1. Создайте файл `.env` на основе `.env.example` и заполните его своими данными:
```
API_ID=your_api_id_here        # Получите на https://my.telegram.org
API_HASH=your_api_hash_here    # Получите на https://my.telegram.org
PHONE=your_phone_number_here   # В формате +7XXXXXXXXXX
```

2. Запустите сбор данных и создание индекса:
```bash
python collect_and_index.py
```

## Использование

### Консольный интерфейс

```bash
python cli.py \
  --database-path path/to/your/database.sqlite \
  --methods lowcase normalize_spaces special_chars remove_stopwords lemmatize_text \
  search "ваш поисковый запрос"
```

### HTTP API

Запустите сервер:
```bash
python app.py \
  --database-path path/to/your/database.sqlite \
  --methods lowcase normalize_spaces special_chars remove_stopwords lemmatize_text
```

Выполните поиск через HTTP:
```bash
curl "http://localhost:5000/documents?q=ваш+поисковый+запрос"
```

## Структура проекта

- `src/index_creater/` - Реализация инвертированного индекса
- `src/utils/` - Утилиты для обработки текста и сжатия данных
- `app.py` - HTTP API сервер
- `cli.py` - Консольный интерфейс
- `requirements.txt` - Зависимости проекта

## Особенности реализации

1. **Инвертированный индекс:**
   - Эффективное хранение соответствий термин-документ
   - Оптимизированная структура для быстрого поиска
   - Поддержка инкрементального обновления

2. **Алгоритмы сжатия:**
   - Elias Gamma: оптимален для малых чисел
   - Elias Delta: эффективен для больших значений
   - Возможность сравнения степени сжатия

3. **Обработка текста:**
   - Полная поддержка русского языка
   - Настраиваемый пайплайн обработки
   - Эффективная лемматизация

## Тестирование производительности

Проект протестирован на коллекции из ~40,000 документов социальной сети. Основные метрики:
- Время индексации
- Скорость поиска
- Эффективность сжатия
- Качество поиска для запросов, связанных с СПбГУ/МГУ
